{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\royal\\\\OneDrive\\\\Desktop\\\\maid-service-platform-complete\\\\maid-service-platform-complete\\\\frontend\\\\src\\\\components\\\\RazorpayPayment.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RazorpayPayment = ({\n  amount,\n  bookingData,\n  onSuccess,\n  onFailure\n}) => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const loadRazorpay = () => new Promise(resolve => {\n    const script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n    script.onload = () => resolve(true);\n    script.onerror = () => resolve(false);\n    document.body.appendChild(script);\n  });\n  const pay = async () => {\n    setLoading(true);\n    try {\n      const ok = await loadRazorpay();\n      if (!ok) {\n        return onFailure === null || onFailure === void 0 ? void 0 : onFailure('Razorpay SDK failed to load');\n      }\n      const {\n        data\n      } = await axios.post(`${process.env.REACT_APP_API_URL}/payments/create-order`, {\n        amount,\n        currency: 'INR',\n        notes: {\n          service: (bookingData === null || bookingData === void 0 ? void 0 : bookingData.serviceName) || ''\n        }\n      });\n      if (!(data !== null && data !== void 0 && data.success)) throw new Error('Order creation failed');\n      const {\n        orderId,\n        key\n      } = data.data;\n      const options = {\n        key,\n        amount: amount * 100,\n        currency: 'INR',\n        name: 'CleanConnect',\n        description: 'Maid Service Payment',\n        order_id: orderId,\n        handler: async response => {\n          try {\n            var _verify$data;\n            const verify = await axios.post(`${process.env.REACT_APP_API_URL}/payments/verify`, response);\n            if ((_verify$data = verify.data) !== null && _verify$data !== void 0 && _verify$data.success) onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(verify.data.data);else onFailure === null || onFailure === void 0 ? void 0 : onFailure('Verification failed');\n          } catch (_) {\n            onFailure === null || onFailure === void 0 ? void 0 : onFailure('Verification error');\n          }\n        },\n        prefill: {\n          name: (bookingData === null || bookingData === void 0 ? void 0 : bookingData.customerName) || '',\n          email: (bookingData === null || bookingData === void 0 ? void 0 : bookingData.customerEmail) || '',\n          contact: (bookingData === null || bookingData === void 0 ? void 0 : bookingData.customerPhone) || ''\n        },\n        theme: {\n          color: '#3B82F6'\n        }\n      };\n      const rzp = new window.Razorpay(options);\n      rzp.open();\n    } catch (e) {\n      onFailure === null || onFailure === void 0 ? void 0 : onFailure(e.message || 'Payment failed to start');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"btn-primary w-full py-3\",\n    onClick: pay,\n    disabled: loading,\n    children: loading ? 'Processing…' : `Pay ₹${amount}`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(RazorpayPayment, \"/Rjh5rPqCCqf0XYnTUk9ZNavw3Q=\");\n_c = RazorpayPayment;\nexport default RazorpayPayment;\nvar _c;\n$RefreshReg$(_c, \"RazorpayPayment\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","RazorpayPayment","amount","bookingData","onSuccess","onFailure","_s","loading","setLoading","loadRazorpay","Promise","resolve","script","document","createElement","src","onload","onerror","body","appendChild","pay","ok","data","post","process","env","REACT_APP_API_URL","currency","notes","service","serviceName","success","Error","orderId","key","options","name","description","order_id","handler","response","_verify$data","verify","_","prefill","customerName","email","customerEmail","contact","customerPhone","theme","color","rzp","window","Razorpay","open","e","message","className","onClick","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/royal/OneDrive/Desktop/maid-service-platform-complete/maid-service-platform-complete/frontend/src/components/RazorpayPayment.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst RazorpayPayment = ({ amount, bookingData, onSuccess, onFailure }) => {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const loadRazorpay = () =>\r\n    new Promise((resolve) => {\r\n      const script = document.createElement('script');\r\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\r\n      script.onload = () => resolve(true);\r\n      script.onerror = () => resolve(false);\r\n      document.body.appendChild(script);\r\n    });\r\n\r\n  const pay = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const ok = await loadRazorpay();\r\n      if (!ok) {\r\n        return onFailure?.('Razorpay SDK failed to load');\r\n      }\r\n\r\n      const { data } = await axios.post(`${process.env.REACT_APP_API_URL}/payments/create-order`, {\r\n        amount,\r\n        currency: 'INR',\r\n        notes: { service: bookingData?.serviceName || '' }\r\n      });\r\n\r\n      if (!data?.success) throw new Error('Order creation failed');\r\n\r\n      const { orderId, key } = data.data;\r\n\r\n      const options = {\r\n        key,\r\n        amount: amount * 100,\r\n        currency: 'INR',\r\n        name: 'CleanConnect',\r\n        description: 'Maid Service Payment',\r\n        order_id: orderId,\r\n        handler: async (response) => {\r\n          try {\r\n            const verify = await axios.post(`${process.env.REACT_APP_API_URL}/payments/verify`, response);\r\n            if (verify.data?.success) onSuccess?.(verify.data.data);\r\n            else onFailure?.('Verification failed');\r\n          } catch (_) {\r\n            onFailure?.('Verification error');\r\n          }\r\n        },\r\n        prefill: {\r\n          name: bookingData?.customerName || '',\r\n          email: bookingData?.customerEmail || '',\r\n          contact: bookingData?.customerPhone || ''\r\n        },\r\n        theme: { color: '#3B82F6' }\r\n      };\r\n\r\n      const rzp = new window.Razorpay(options);\r\n      rzp.open();\r\n    } catch (e) {\r\n      onFailure?.(e.message || 'Payment failed to start');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button className=\"btn-primary w-full py-3\" onClick={pay} disabled={loading}>\r\n      {loading ? 'Processing…' : `Pay ₹${amount}`}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default RazorpayPayment;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}